{"ast":null,"code":"import _defineProperty from \"C:/Users/datpo/OneDrive/Documents/Proto Coop/ProtoWebsite/proto-website/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { Clock, Raycaster, Vector2 } from \"three\";\nconst clock = new Clock();\nconst mouse = new Vector2(1, 1);\nlet hoverRaycaster;\nlet clickRaycaster;\nclass Loop {\n  constructor(camera, scene, renderer) {\n    _defineProperty(this, \"updatables\", void 0);\n    _defineProperty(this, \"hoverables\", void 0);\n    _defineProperty(this, \"clickables\", void 0);\n    this.camera = camera;\n    this.scene = scene;\n    this.renderer = renderer;\n    this.updatables = [];\n    this.hoverables = [];\n    this.clickables = [];\n\n    //Layer for hoverables\n    hoverRaycaster = new Raycaster();\n    hoverRaycaster.layers.set(2);\n    hoverRaycaster.params.includeInvisible = true;\n\n    //Layer for clickable\n    clickRaycaster = new Raycaster();\n    clickRaycaster.layers.set(4);\n    clickRaycaster.params.includeInvisible = true;\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('click', onClick);\n  }\n  start() {\n    this.renderer.setAnimationLoop(() => {\n      this.tick();\n      this.renderer.render(this.scene, this.camera);\n    });\n  }\n  stop() {\n    this.renderer.setAnimationLoop(null);\n  }\n  tick() {\n    const delta = clock.getDelta();\n    for (const object of this.updatables) {\n      object.tick(delta);\n    }\n    onHover(mouse, this.camera, this.scene);\n  }\n}\nfunction onMouseMove(event) {\n  event.preventDefault();\n  mouse.x = event.clientX / window.innerWidth * 2 - 1;\n  mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n}\nfunction onHover(mouse, camera, scene) {\n  hoverRaycaster.setFromCamera(mouse, camera);\n  const intersection = hoverRaycaster.intersectObjects(scene.children);\n  if (intersection.length > 0) {\n    intersection.forEach(item => {\n      item.object.onHover();\n    });\n  }\n}\nfunction onClick() {\n  clickRaycaster.setFromCamera(mouse, _camera);\n  const intersection = clickRaycaster.intersectObjects(_scene.children);\n  if (intersection.length > 0) {\n    intersection.forEach(item => {\n      item.object.onClick();\n    });\n  }\n}\nexport { Loop };","map":{"version":3,"names":["Clock","Raycaster","Vector2","clock","mouse","hoverRaycaster","clickRaycaster","Loop","constructor","camera","scene","renderer","_defineProperty","updatables","hoverables","clickables","layers","set","params","includeInvisible","document","addEventListener","onMouseMove","onClick","start","setAnimationLoop","tick","render","stop","delta","getDelta","object","onHover","event","preventDefault","x","clientX","window","innerWidth","y","clientY","innerHeight","setFromCamera","intersection","intersectObjects","children","length","forEach","item","_camera","_scene"],"sources":["C:/Users/datpo/OneDrive/Documents/Proto Coop/ProtoWebsite/proto-website/src/World/System/Loop.js"],"sourcesContent":["import { Clock, Raycaster, Vector2 } from \"three\";\r\nconst clock = new Clock();\r\nconst mouse = new Vector2(1, 1);\r\nlet hoverRaycaster;\r\nlet clickRaycaster;\r\n\r\n\r\nclass Loop {\r\n  updatables;\r\n  hoverables;\r\n  clickables;\r\n\r\n  constructor(camera, scene, renderer) {\r\n    this.camera = camera;\r\n    this.scene = scene;\r\n    this.renderer = renderer;\r\n    this.updatables = [];\r\n    this.hoverables = [];\r\n    this.clickables = [];\r\n\r\n    //Layer for hoverables\r\n    hoverRaycaster = new Raycaster();\r\n    hoverRaycaster.layers.set(2);\r\n    hoverRaycaster.params.includeInvisible = true;\r\n\r\n    //Layer for clickable\r\n    clickRaycaster = new Raycaster();\r\n    clickRaycaster.layers.set(4);\r\n    clickRaycaster.params.includeInvisible = true;\r\n\r\n    document.addEventListener('mousemove', onMouseMove);\r\n    document.addEventListener('click', onClick);\r\n  }\r\n\r\n  start() {\r\n    this.renderer.setAnimationLoop(() => {\r\n      this.tick();\r\n      this.renderer.render(this.scene, this.camera);\r\n    });\r\n  }\r\n\r\n  stop() {\r\n    this.renderer.setAnimationLoop(null);\r\n  }\r\n\r\n  tick() {\r\n    const delta = clock.getDelta();\r\n    for (const object of this.updatables) {\r\n      object.tick(delta);\r\n    }\r\n    onHover(mouse, this.camera, this.scene);\r\n  }\r\n}\r\n\r\nfunction onMouseMove(event) {\r\n\r\n  event.preventDefault();\r\n  mouse.x = (event.clientX / window.innerWidth) * 2 - 1;\r\n  mouse.y = - (event.clientY / window.innerHeight) * 2 + 1;\r\n}\r\n\r\nfunction onHover(mouse, camera, scene) {\r\n  hoverRaycaster.setFromCamera(mouse, camera);\r\n  const intersection = hoverRaycaster.intersectObjects(scene.children);\r\n  if (intersection.length > 0) {\r\n    intersection.forEach(item => {\r\n      item.object.onHover();\r\n    })\r\n  }\r\n}\r\nfunction onClick() {\r\n  clickRaycaster.setFromCamera(mouse, _camera);\r\n  const intersection = clickRaycaster.intersectObjects(_scene.children);\r\n  if (intersection.length > 0) {\r\n    intersection.forEach(item => {\r\n      item.object.onClick();\r\n    })\r\n  }\r\n}\r\n\r\nexport { Loop };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}